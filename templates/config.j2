{# If value is a list, expand it by printing several (key, value) pairs.  #}
{# Otherwise, just print the (key, value) pair unchanged. #}
{% macro expand_list(key, value) -%}
{% if value is string or value is number %}
  {{ key }}: "{{ value }}"
{% else %}
{% for subvalue in value %}
  {{ key }}: "{{ subvalue }}"
{% endfor %}
{% endif %}
{%- endmacro %}
# NSD configuration, automatically generated by Ansible.
# Do not edit by hand!

server:
{% if nsd_common_config is defined %}
  # Common configuration
{% for key, value in nsd_common_config.iteritems() -%}
{{ expand_list(key, value) }}
{%- endfor %}
{% endif %}

{% if nsd_local_config is defined %}
  # Local configuration
{% for key, value in nsd_local_config.iteritems() -%}
{{ expand_list(key, value) }}
{%- endfor %}
{% endif %}


# Include zone definitions
include: "{{ zones_config_file }}"

